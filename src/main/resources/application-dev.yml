server:
  port: ${SERVER_PORT:8080}

spring:
  datasource:
    url: jdbc:postgresql://localhost:5432/ttelgo_dev
    username: ${DB_USERNAME:postgres}
    password: ${DB_PASSWORD:Post@gre_2026}
    driver-class-name: org.postgresql.Driver
  
  # Mail Configuration (Gmail SMTP)
  mail:
    host: ${MAIL_HOST:smtp.gmail.com}
    port: ${MAIL_PORT:587}
    username: ${MAIL_USERNAME:support@ttelgo.com}
    password: ${MAIL_PASSWORD:byzervhcyeunpfaa}
    from: ${MAIL_FROM:support@ttelgo.com}
    properties:
      mail:
        smtp:
          auth: true
          starttls:
            enable: true
            required: true
          connectiontimeout: 10000
          timeout: 10000
          writetimeout: 10000
          ssl:
            trust: "*"
    default-encoding: UTF-8
    hikari:
      pool-name: ttelgo-hikari-dev
      maximum-pool-size: ${DB_POOL_MAX:10}
      minimum-idle: ${DB_POOL_MIN_IDLE:2}
      connection-timeout: ${DB_POOL_CONNECTION_TIMEOUT_MS:30000}
      validation-timeout: ${DB_POOL_VALIDATION_TIMEOUT_MS:5000}
      idle-timeout: ${DB_POOL_IDLE_TIMEOUT_MS:600000}
      max-lifetime: ${DB_POOL_MAX_LIFETIME_MS:1800000}
      leak-detection-threshold: ${DB_POOL_LEAK_DETECTION_MS:0}
  
  jpa:
    hibernate:
      ddl-auto: update  # Update schema without dropping data (preserves data on restart)
    show-sql: true
    properties:
      hibernate:
        format_sql: true
        dialect: org.hibernate.dialect.PostgreSQLDialect
        jdbc:
          time_zone: UTC
        default_batch_fetch_size: 50
  
  flyway:
    enabled: false  # Disable Flyway completely, use Hibernate DDL

esimgo:
  api:
    endpoint: https://api.esim-go.com/v2.4
    key: gSAXaGtFYQ3yKoda4A8kwksYBq1E4ZO14XmquhN_

stripe:
  secret:
    # Use environment variable STRIPE_SECRET_KEY, or fallback to placeholder
    # For local dev, set: $env:STRIPE_SECRET_KEY="sk_test_..."
    key: ${STRIPE_SECRET_KEY:your-stripe-secret-key-here}
  publishable:
    # Use environment variable STRIPE_PUBLISHABLE_KEY, or fallback to placeholder
    # For local dev, set: $env:STRIPE_PUBLISHABLE_KEY="pk_test_..."
    key: ${STRIPE_PUBLISHABLE_KEY:pk_test_xxxxxxxxxxxxx}
  webhook:
    # Use environment variable STRIPE_WEBHOOK_SECRET, or fallback to placeholder
    # For local dev, set: $env:STRIPE_WEBHOOK_SECRET="whsec_..."
    secret: ${STRIPE_WEBHOOK_SECRET:your-stripe-webhook-secret-here}

jwt:
  secret: ttelgo-super-secret-key-for-development-minimum-256-bits-required-for-hmac-sha256
  expiration: 86400000  # 24 hours in milliseconds
  refresh-expiration: 604800000  # 7 days in milliseconds

logging:
  level:
    root: INFO
    com.tiktel.ttelgo: DEBUG

management:
  health:
    redis:
      enabled: false
  endpoint:
    health:
      show-details: always

